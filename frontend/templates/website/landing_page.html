<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="{{ url_for('static', path='media/favicon.ico') }}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>Meditab Portal - AI Patient Management</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" rel="stylesheet" />

    <link rel="stylesheet" href="{{ url_for('static', path='css/landing_page_styles.css') }}">

</head>
<body>

    <nav class="navbar" id="navbar">
        <div class="brand-title">
            <svg class="brand-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 182 182" aria-hidden="true">
                <path d="M136.049 66.771c9.257 15.264 23.296 22.4 31.356 15.938s7.091-24.074-2.166-39.337-23.296-22.4-31.357-15.938-7.09 24.074 2.167 39.337M165.22 138.727c-9.257 15.264-23.296 22.4-31.356 15.938s-7.09-24.073 2.167-39.337 23.296-22.4 31.356-15.937c8.06 6.461 7.09 24.073-2.167 39.336M90.646 143.945c17.241 0 31.825 8.082 31.825 18.613 0 10.873-14.188 19.442-31.43 19.442-17.24 0-31.27-8.155-31.27-19.027 0-10.532 13.634-19.028 30.875-19.028M91.042 0c17.241 0 31.825 8.082 31.825 18.613 0 10.872-14.188 19.442-31.43 19.442-17.24 0-31.27-8.156-31.27-19.028C60.167 8.496 73.8 0 91.042 0M16.762 138.727c9.257 15.264 23.295 22.4 31.356 15.938s7.09-24.073-2.167-39.337-23.296-22.4-31.356-15.937c-8.06 6.461-7.09 24.073 2.167 39.336M16.864 43.356c9.257-15.264 23.295-22.4 31.356-15.938s7.09 24.073-2.167 39.337-23.296 22.4-31.356 15.938-7.09-24.074 2.166-39.337"/>
            </svg>
            <span>Meditab Portal</span>
        </div>
        <div class="nav-links">
            <a href="#features" class="nav-item">Capabilities</a>
            <a href="#workflow" class="nav-item">Workflow</a>
            <a href="#" class="nav-item" onclick="openModal('provider')">Provider Login</a>
        </div>
        <button class="nav-btn" onclick="openModal('patient')">Patient Portal</button>
    </nav>

    <section class="hero">
        <h1>Patient Management <br><span class="text-gradient">Redefined by AI</span></h1>
        <p>A secure, multi-modal portal bridging patients and doctors. From voice-based symptom checks to AI-generated medical summaries.</p>
        
        <div class="hero-btns">
            <button class="cta-btn cta-primary" onclick="openModal('patient')">
                Patient Login <span class="material-symbols-rounded">login</span>
            </button>
            <button class="cta-btn cta-secondary">
                Request Demo
            </button>
        </div>

        <div class="hero-mockup-wrapper">
            <div class="mockup-inner">
                <div class="m-sidebar">
                    <div class="sk-circle"></div>
                    <div class="sk-line sk-w-80"></div>
                    <div class="sk-line sk-w-60"></div>
                    <div class="sk-line sk-w-80" style="margin-top: 20px;"></div>
                </div>
                <div class="m-main">
                    <div class="m-bubble-user">
                        I've been feeling a mild fever and fatigue since yesterday.
                    </div>
                    <div class="m-bubble-ai">
                        <span style="font-weight: 700; display: block; margin-bottom: 5px;">AI Assessment</span>
                        I understand. Could you please describe if you are experiencing any body aches or sore throat along with the fever?
                    </div>
                    <div style="position: absolute; bottom: 30px; left: 30px; right: 30px; border: 1px solid #e2e8f0; border-radius: 12px; height: 50px; display: flex; align-items: center; padding: 0 15px; color: #94a3b8;">
                        <span class="material-symbols-rounded">mic</span>
                        <span style="margin-left: 10px; font-size: 0.9rem;">Tap to speak...</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="features" id="features">
        <div class="section-header">
            <span class="sub-head">System Capabilities</span>
            <h2 class="head-title">Intelligent Care Delivery</h2>
            <p style="color:#64748b">Powered by Gemini LLM, Paddle OCR, and advanced Speech-to-Text engines.</p>
        </div>

        <div class="bento-grid">
            <div class="bento-card">
                <div class="icon-box"><span class="material-symbols-rounded">graphic_eq</span></div>
                <h3 class="card-title">Voice Assistant Interaction</h3>
                <p class="card-desc">LLM-powered structured questions with conversational memory. Patients can "Tap to Speak" for natural symptom description.</p>
                <div class="tag-list">
                    <span class="tag">Real-time STT</span>
                    <span class="tag">Empathetic Response</span>
                </div>
            </div>

            <div class="bento-card">
                <div class="icon-box"><span class="material-symbols-rounded">history_edu</span></div>
                <h3 class="card-title">Patient History & Review</h3>
                <p class="card-desc">Multi-modal input allows users to upload documents or images (OCR). Review real-time transcripts before submission.</p>
                <div class="tag-list">
                    <span class="tag">Editable Transcripts</span>
                    <span class="tag">Image Upload</span>
                </div>
            </div>

            <div class="bento-card wide">
                <div class="icon-box"><span class="material-symbols-rounded">admin_panel_settings</span></div>
                <h3 class="card-title">Provider Admin Interface</h3>
                <p class="card-desc">A comprehensive dashboard for doctors to review AI-generated patient summaries, listen to original audio recordings, and identify critical condition flags.</p>
                <div class="tag-list">
                    <span class="tag">Critical Flags</span>
                    <span class="tag">PDF Export</span>
                    <span class="tag">One-click Review</span>
                </div>
            </div>

            <div class="bento-card wide">
                <div class="icon-box"><span class="material-symbols-rounded">security</span></div>
                <h3 class="card-title">Enterprise Security & Consent</h3>
                <p class="card-desc">Built with patient privacy first. Features SSO (Google/Email), 2FA authentication, and mandatory BAA agreement reviews.</p>
                <div class="tag-list">
                    <span class="tag">OAuth2</span>
                    <span class="tag">BAA Agreement</span>
                    <span class="tag">Consent Forms</span>
                </div>
            </div>
        </div>
    </section>

    <section class="workflow" id="workflow">
        <div class="section-header">
            <span class="sub-head">Data Architecture</span>
            <h2 class="head-title">How Data Flows</h2>
        </div>
        
        <div class="flow-grid" style="max-width: 1000px; margin: 60px auto 0;">
            <div class="flow-item">
                <h4 class="flow-head">01. Authentication</h4>
                <p class="flow-text">User logs in via SSO/OTP and signs data consent forms.</p>
            </div>
            <div class="flow-item">
                <h4 class="flow-head">02. Interaction</h4>
                <p class="flow-text">Patient interacts via Voice/Text. Gemini LLM structures the medical query.</p>
            </div>
            <div class="flow-item">
                <h4 class="flow-head">03. Analysis</h4>
                <p class="flow-text">System flags critical symptoms and generates a clinical summary.</p>
            </div>
            <div class="flow-item">
                <h4 class="flow-head">04. Diagnosis</h4>
                <p class="flow-text">Doctor reviews summary on Admin Dashboard and finalizes prescription.</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="brand-title footer-brand">
            <svg class="brand-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 182 182" aria-hidden="true">
                <path d="M136.049 66.771c9.257 15.264 23.296 22.4 31.356 15.938s7.091-24.074-2.166-39.337-23.296-22.4-31.357-15.938-7.09 24.074 2.167 39.337M165.22 138.727c-9.257 15.264-23.296 22.4-31.356 15.938s-7.09-24.073 2.167-39.337 23.296-22.4 31.356-15.937c8.06 6.461 7.09 24.073-2.167 39.336M90.646 143.945c17.241 0 31.825 8.082 31.825 18.613 0 10.873-14.188 19.442-31.43 19.442-17.24 0-31.27-8.155-31.27-19.027 0-10.532 13.634-19.028 30.875-19.028M91.042 0c17.241 0 31.825 8.082 31.825 18.613 0 10.872-14.188 19.442-31.43 19.442-17.24 0-31.27-8.156-31.27-19.028C60.167 8.496 73.8 0 91.042 0M16.762 138.727c9.257 15.264 23.295 22.4 31.356 15.938s7.09-24.073-2.167-39.337-23.296-22.4-31.356-15.937c-8.06 6.461-7.09 24.073 2.167 39.336M16.864 43.356c9.257-15.264 23.295-22.4 31.356-15.938s7.09 24.073-2.167 39.337-23.296 22.4-31.356 15.938-7.09-24.074 2.166-39.337"/>
            </svg>
            <span>Meditab Portal</span>
        </div>
        <p class="footer-text">&copy; 2026 Meditab Portal. All rights reserved.</p>
    </footer>

    <div class="modal-overlay" id="authModal">
        <div class="auth-card" id="authCard">
            
            <div class="auth-header-row">
                <div class="auth-brand">
                    <div class="auth-brand-title">
                        <svg style="width:24px;height:24px;fill:var(--primary)" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 182 182"><path d="M136.049 66.771c9.257 15.264 23.296 22.4 31.356 15.938s7.091-24.074-2.166-39.337-23.296-22.4-31.357-15.938-7.09 24.074 2.167 39.337M165.22 138.727c-9.257 15.264-23.296 22.4-31.356 15.938s-7.09-24.073 2.167-39.337 23.296-22.4 31.356-15.937c8.06 6.461 7.09 24.073-2.167 39.336M90.646 143.945c17.241 0 31.825 8.082 31.825 18.613 0 10.873-14.188 19.442-31.43 19.442-17.24 0-31.27-8.155-31.27-19.027 0-10.532 13.634-19.028 30.875-19.028M91.042 0c17.241 0 31.825 8.082 31.825 18.613 0 10.872-14.188 19.442-31.43 19.442-17.24 0-31.27-8.156-31.27-19.028C60.167 8.496 73.8 0 91.042 0M16.762 138.727c9.257 15.264 23.295 22.4 31.356 15.938s7.09-24.073-2.167-39.337-23.296-22.4-31.356-15.937c-8.06 6.461-7.09 24.073 2.167 39.336M16.864 43.356c9.257-15.264 23.295-22.4 31.356-15.938s7.09 24.073-2.167 39.337-23.296 22.4-31.356 15.938-7.09-24.074 2.166-39.337"/></svg>
                        Meditab
                    </div>
                    <div class="auth-subtitle">Secure Health Portal</div>
                </div>
                <button class="close-modal" onclick="closeModal()">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>

            <div class="role-switch-container">
                <div class="role-switch">
                    <button class="role-btn active" id="role-patient" onclick="switchRole('patient')">Patient</button>
                    <button class="role-btn" id="role-provider" onclick="switchRole('provider')">Provider</button>
                </div>
            </div>

            {% from "macro/auth_interface.html" import render_auth_interface %}
            {{ render_auth_interface(client_id) }}
                
        </div>
    </div>

    <script src="{{ url_for('static', path='js/auth.js') }}"></script>
    <script>
        // Modal Logic to ensure it works correctly
        function openModal(role = 'patient') {
            const modal = document.getElementById('authModal');
            if(modal) {
                modal.classList.add('active');
                if(typeof switchRole === 'function') {
                    switchRole(role);
                }
            }
        }

        function closeModal() {
            const modal = document.getElementById('authModal');
            if(modal) modal.classList.remove('active');
        }

        // Close when clicking outside the modal content
        document.getElementById('authModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('authModal')) {
                closeModal();
            }
        });
    </script>
</body>
</html>